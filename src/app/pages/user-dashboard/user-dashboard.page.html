<ion-header>
    <div class="ion-toolbar">
      <span style="margin-top: 10px;"><b>{{ticketId}}</b></span> 
      <span class="other-option">
        <ion-button size="small" class="btn-logout" (click)="setOpen(true)"><i class="fa-solid fa-circle-info"></i></ion-button>
        <ion-button size="small" class="btn-logout" id="open-custom-dialog">Logout</ion-button>
      </span>
  </div>
</ion-header>

<ion-content>
  <!-- for chat ui -->
    <div class="chat">
      <div class="messages" id="chat" #scrollMe>
        <div *ngFor="let review of reviewData">
        <div class="message" [ngClass]="review.reviewer == 'admin' ? 'stark' : 'parker'" *ngIf="(review.message !== null)">
          {{review.message}}
        </div>

        <div class="message" [ngClass]="review.reviewer == 'admin' ? 'stark' : 'parker'" *ngIf="(review.imageFile !== null)">
          <img src="{{review.imageFile}}" alt="" style="height: 80px; width: 80px; border-radius: 15px; cursor: pointer;">
        </div>

        <div class="message" [ngClass]="review.reviewer == 'admin' ? 'stark' : 'parker'" *ngIf="(review.audioFile !== null)">
          <audio controls src="{{review.audioFile}}" style="height: 30px;"></audio>
        </div>  
      </div>
      </div>

      <!-- for input options -->
      <form #reviewForm="ngForm" (ngSubmit)="onReviewSubmit(reviewForm)">
        <div class="input">
          <input ngModel name="fileInput" id="companyPhotos" type="file" accept="image/*" (change)="onSelect($event)" #fileInput="ngModel" style="display: none;">
          <label for="companyPhotos"><i class="fas fa-camera"></i></label>
          <i class="fas fa-microphone"></i>
          <input placeholder="Type your message here!" type="text" #ReviewMessage="ngModel" ngModel name="ReviewMessage"/>
          <!-- <a type="submit"></a> -->
          <button type="submit" style="background: transparent;"><i class='bx bxs-send'></i></button>
        </div>
      </form>
    </div>

    <!-- modal for data -->
    <ion-modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>{{ticketId}}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <p><span style="padding-right: 10px;"><b>Date:</b></span><span>{{ticketData.date}}</span></p>
          <p><span style="padding-right: 10px;"><b>Company Name:</b></span><span>{{ticketData.companyName}}</span></p>
          <p><span style="padding-right: 10px;"><b>Company address:</b></span><span>{{ticketData.companyAddress}}</span></p>
          <p><span style="padding-right: 10px;"><b>Complain:</b></span><span>{{ticketData.complain}}</span></p>
          <p><span style="padding-right: 10px;"><b>Attached voice:</b></span><br><span><p class="text-start" *ngIf="ticketData.imageFile !== null"><img [src]="photoURL()" width="84px"
            style="border-radius: 15px; max-height: 84px; cursor: pointer;" alt=""
            data-bs-toggle="modal" data-bs-target="#modalImage"></p></span></p>
        </ion-content>
      </ng-template>
    </ion-modal>
    <!-- end modal -->

  <!-- modal logout -->
  <ion-modal id="example-modal" #modal trigger="open-custom-dialog">
    <ng-template>
      <div class="wrapper">
        <h1>Logout?</h1>

        <ion-list style="text-align: center;">
          <ion-button class="btn-logout" (click)="logout()" (click)="modal.dismiss()">Yes</ion-button>
          <ion-button class="btn-logout" (click)="modal.dismiss()">No</ion-button>
        </ion-list>
      </div>
    </ng-template>
  </ion-modal>
  <!-- end modal logout -->
</ion-content>
